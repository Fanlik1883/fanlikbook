    <!DOCTYPE html>
    <html>
    <head>
        <meta charset="utf-8">
        <script src="js/jquery.min.js"></script>
        <script src="js/cookie.min.js" ></script>
        <script src="js/NoSleep.js"></script>
        <script src="js/lz-string.min.js"></script>
        <script src="js/avtoriz.js"></script>
        <script type="text/javascript" charset="utf-8" src="cordova.js"></script> 
        <meta api="https://rapidapi.com/developer">
        <title>Книги на разных языках</title>
        <link href="css/booklist.css" rel="stylesheet" type="text/css">
        <link href="css/avtoriz.css" rel="stylesheet" type="text/css">

        <link rel="icon" type="image/x-icon" href="icons-32.png">
         <meta name="viewport" content="initial-scale=1, width=device-width, viewport-fit=cover">
      

    </head>

    <body>
        <div id="Avtorization_link"></div>
        <div width="79%" style="position: absolute; left: 10px;top: 20px;"><input type="number" id="file_nom0"  required minlength="4" maxlength="8"  max="8" size="10" > <output id="file_nom1"></output> - <output id="file_nommax"></output></div>
        <div width="19%" style="position: absolute; right: 10px;top: 10px;"><img src='img/menu.png' onclick="SettingsPanelHide();" width='50' height='50'/></div>
        <div id="ViewPort">
            
         </div>

 <script>
    var UserHash = getCookie("UserHash");
var UserName = getCookie("UserName");
     BookFavorite()
            function BookFavorite() {
                let params = new URLSearchParams(document.location.search);
                var req_out = document.getElementById('ViewPort');
                $.ajaxSetup({timeout: 10000});
                var finds = '';
                $.post('https://allfilmbook.ru/API/book/favorite/', {UserName: UserName, UserHash: UserHash }).success(function (data) {
            
                    json = JSON.parse(data);
                    if (json.length === 0) {
            // Display a placeholder image
            req_out.innerHTML = "<img src='/img/zero.jpg' style=' width: 100%;' title='' />";
        } else {
                    json.forEach(function (item, i, json) {
                        let liLast = document.createElement('div');
                        liLast.className = "MovieCardFace";
                        liLast.id = 'Book_'+item['book_id'];
                        liLast.addEventListener('click', function() { showDesc(item['book_id']); });
                      
                        liLast.innerHTML = "<img src='"+item['image']+"' alt='"+item['title']+"' class='MovesPicFace'>";
                        liLast.innerHTML += "<div class='short-infobar' id='name_"+item['book_id']+"'><span class='short-quality'>"+item['title']+"</span></div>";
                        liLast.innerHTML += "<div class='overlay' id='overlay_"+item['book_id']+"'>"+item['rate']+"</div>";
                   
                        liLast.innerHTML += "<div class='desc hide' id='desc_"+item['book_id']+"' ></div?";
                        liLast.innerHTML +='</div>';



                        ViewPort.append(liLast); // вставить liLast в конец <ol>			
                    })
                }
                })
            
            }

function GetDesc(n){
    $.get('https://allfilmbook.ru/API/book/description/', { n: n}).done(function (data) {
		json = JSON.parse(data);
        if (json.length === 0) {
                        req_out.innerHTML = "<img src='/img/zero.jpg' style=' width: 100%;' title='' />";
                    } else {
                        
        var req_out = document.getElementById('desc_'+n);
		json.forEach(function (item, i, json) {
            req_out.innerHTML='<img  src=\'img/minus-2-icon-14-256.png\' onclick="minusFavorites('+n+')" class=\'bottons\'>'+
            '<img  src=\'img/read.png\' onclick="openBook('+n+')" class=\'bottons\'>'+
            "<br>"+item['description'];
            
            
            req_out.innerHTML +='</div>';
            document.getElementById("desc_"+n).classList.remove("hide");
            document.getElementById("desc_"+n).classList.toggle("show");
            document.getElementById("name_"+n).classList.toggle("hide");
		})

    }



	})


}

function openBook (id){
setCookieMy('book_id', id); 
//location.reload();
//location.href='index.html?id='+id;
location.href='index.html';
}

function showDesc (id){
  
    if(document.getElementById("desc_"+id).innerHTML==''){
        GetDesc(id);

		setCookieMy('SaveiDF',id);

    }else {

        if(document.getElementById("desc_"+id).classList[1]=="hide"){
            setCookieMy('SaveiDF',id);


            document.getElementById("desc_"+id).classList.remove("hide")
            document.getElementById("desc_"+id).classList.toggle("show")
            document.getElementById("name_"+id).classList.toggle("hide")

        } else {
            document.getElementById("desc_"+id).classList.remove("show")
            document.getElementById("desc_"+id).classList.toggle("hide")
            document.getElementById("name_"+id).classList.remove("hide")


        }
}
}

function setCookieMy(name,data) {
    setCookie(name, data, {
        expires: new Date(Date.now() + 86400 * 1000 * 30 * 12),
        path: '/'
    })

    }


</script>

</body>